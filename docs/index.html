<!DOCTYPE html>
<html>
  <head>
    <title>Universal Wallet 2020</title>
    <meta http-equiv='Content-Type' content='text/html;charset=utf-8'/>
    <!--
      === NOTA BENE ===
      For the three scripts below, if your spec resides on dev.w3 you can check them
      out in the same tree and use relative links so that they'll work offline,
     -->
    <script src='https://www.w3.org/Tools/respec/respec-w3c-common' class='remove'></script>
    <script src="./common.js" class="remove"></script>
    <script type="text/javascript" class="remove">
      var respecConfig = {
        // specification status (e.g., WD, LCWD, NOTE, etc.). If in doubt use ED.
        specStatus: "ED",

        // the specification's short name, as in http://www.w3.org/TR/short-name/
        shortName: "universal-wallet-2020",

        // subtitle for the spec
        subtitle: "This specification describes a portable, extensible, JSON-LD wallet representation, supporting digital currencies and credentials.",

        // if you wish the publication date to be other than today, set this
        //publishDate: "2019-03-26",
        //crEnd: "2019-04-23",
        //implementationReportURI: "https://w3c.github.io/sdh-test-suite",
        previousMaturity: "UNOFFICIAL",
        previousPublishDate: "2020-03-25",

        // if there is a previously published draft, uncomment this and set its YYYY-MM-DD date
        // and its maturity status
        // previousPublishDate:  "1977-03-15",
        // previousMaturity:  "WD",

        // extend the bibliography entries
        localBiblio: ccg.localBiblio,
        doJsonLd: true,

        github: "https://github.com/transmute-industries/universal-wallet/",
        includePermalinks: false,

        // if there a publicly available Editor's Draft, this is the link
        edDraftURI: "https://transmute-industries.github.io/universal-wallet/",

        // if this is a LCWD, uncomment and set the end of its review period
        // lcEnd: "2009-08-05",

        // editors, add as many as you like
        // only "name" is required
        editors: [
          { name: "Orie Steele", url: "https://www.linkedin.com/in/or13b/",
            company: "Transmute", companyURL: "https://transmute.industries/"},
        
        ],
        // authors, add as many as you like.
        // This is optional, uncomment if you have authors as well as editors.
        // only "name" is required. Same format as editors.
        authors:
        [
        { name: "Orie Steele", url: "https://www.linkedin.com/in/or13b/",
            company: "Transmute", companyURL: "https://transmute.industries/"},
        ],
        // name of the WG
        wg:           "Credentials Community Group",

        // URI of the public WG page
        wgURI:        "https://www.w3.org/community/credentials/",

        // name (with the @w3c.org) of the public mailing to which comments are due
        wgPublicList: "public-credentials",

        // URI of the patent status for this WG, for Rec-track documents
        // !!!! IMPORTANT !!!!
        // This is important for Rec-track documents, do not copy a patent URI from a random
        // document unless you know what you're doing. If in doubt ask your friendly neighborhood
        // Team Contact.
        //wgPatentURI:  "https://www.w3.org/2004/01/pp-impl/98922/status",
        maxTocLevel: 2,
        inlineCSS: true
      };
    </script>
    <style>
pre .highlight {
  font-weight: bold;
  color: green;
}
pre .comment {
  font-weight: bold;
  color: Gray;
}
.color-text {
  font-weight: bold;
  text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
}
ol.algorithm {
  counter-reset: numsection;
  list-style-type: none;
}
ol.algorithm li {
  margin: 0.5em 0;
}
ol.algorithm li:before {
  font-weight: bold;
  counter-increment: numsection;
  content: counters(numsection, ".") ") ";
}
    </style>
  </head>
  <body>
<section id='abstract'>
<p>
This specification describes a portable, extensible, JSON-LD wallet, supporting digital currencies and credentials.
</p>
</section>

<section id='sotd'>
<p>
This document is experimental and is undergoing heavy development.
It is inadvisable to implement the specification in its current form.
An
<a href="https://github.com/transmute/universal-wallet">experimental implementation</a>
is available.
</p>

</section>

<section class="informative">
<h2>Introduction</h2>
<p>
Physical wallets store currency, credentials such a licenses, and business cards. 
In contrast, digital wallets may support payments or credentials, 
but each wallet represents data and capabilities differently, 
sometimes intentionally to facilitate vendor lock in.
</p>

<p>
The purpose of this specification is to design an abstract data model and set of interfaces that 
approximate a physical wallet system and its common uses.
</p>

</section>

<section id="terms" class="normative">
<h2>Terminology</h2>

<p>
The following terms are used to describe concepts involved in the
<a>universal wallet</a>.
</p>

<dl>

<dt><dfn>wallet</dfn></dt>
<dd>
A wallet is a small, flat case that can be used to carry such small 
personal items as paper currency, credit cards, and identification documents.
See <a href="https://en.wikipedia.org/wiki/Wallet">Wallet</a>.
</dd>

<dt><dfn>cryptocurrency</dfn></dt>
<dd>
A digital asset designed to work as a medium of exchange wherein individual coin 
ownership records are stored in a digital ledger or computerized database using 
strong cryptography to secure transaction record entries, to control the creation 
of additional digital coin records. 
See <a href="https://en.wikipedia.org/wiki/Cryptocurrency">Cryptocurrency</a>.
</dd>

<dt><dfn>verifiable credential</dfn></dt>
<dd>
A data model for conveying claims made by an issuer about a subject. See [[vc-data-model]]. 
</dd>

<dt><dfn>secret</dfn></dt>
<dd>
Information controlled by an <a>identity</a>.
MAY be used to derive <a>key</a>s.
</dd>

<dt><dfn>key</dfn></dt>
<dd>
A mechanism for granting or restricing access to something. 
MAY be used to <a>issue</a> and <a>prove</a> <a>verifiable credentials</a>.
MAY be used to transfer and controll <a>cryptocurrency</a>.
See <a href="https://en.wikipedia.org/wiki/Key_(cryptography)">Key_(cryptography)</a>.
</dd>

<dt><dfn>card</dfn></dt>
<dd>
A thin rectangular object used to store information graphically or digitally. 
MAY be used to represent a <a>key</a>, <a>cryptocurrency</a> or <a>verifiable credential</a>.
</dd>

<dt><dfn>meta data</dfn></dt>
<dd>
Information about other information.
MAY be used to describe the context in which information is used, or attributes of other information.
</dd>

<dt><dfn>identity</dfn></dt>
<dd>
A unique entity. Typically represented with a unique identifier.
</dd>

<dt><dfn>controller</dfn></dt>
<dd>
The entity that has the ability to make changes to 
an <a>identity</a>, <a>cryptocurrency</a> or <a>verifiable credential</a>.
See 
<a
href="https://w3c.github.io/did-core/#dfn-did-controllers"
target="_blank"
>here</a
>, [[vc-data-model]].
</dd>

<dt><dfn>issue</dfn></dt>
<dd>
The process of creating a <a>verifiable credential</a>.
MAY require the use of a <a>key</a>. 
See [[vc-data-model]]. 
</dd>

<dt><dfn>prove</dfn></dt>
<dd>
The process of presenting a <a>verifiable credential</a>. 
MAY require the use of a <a>key</a>. 
See [[vc-data-model]]. 
</dd>

<dt><dfn>transfer</dfn></dt>
<dd>
The process of changing the <a>controller</a> of a <a>cryptocurrency</a>, <a>identity</a> or <a>verifiable credential</a>. 
MAY require the use of a <a>key</a>. 
</dd>

<dt><dfn>agent</dfn></dt>
<dd>
A representative for an <a>identity</a>.
MAY require the use of a <a>wallet</a>. 
MAY support <a>transfer</a>,<a>issue</a>, <a>prove</a>. 
</dd>

<dt><dfn>universal wallet</dfn></dt>
<dd>
A digital wallet that supports <a>cryptocurrency</a>, <a>verifiable credential</a>s and <a>card</a>s.
</dd>

</dl> 
</section>

<section id="Data Model" class="normative">
  <h2>Data Model</h2>

  <section >
    <h3>Profile</h3>

    <p>A profile is a named bucket for grouping wallet content.</p>
    <p>A profile MAY be used to group all correlatable wallet items together.</p>
    <p>
      A profile MAY be used to manage seperate external personal, 
      or organizational identities and their associated data.
    </p>

    <p>Here is an example of a personal profile.</p>

    <pre class="example highlight" title="A profile for a personal identity">
      {
        "id": "did:example:123456789abcdefghi",
        "type": "Person",
        "title": "John Smith",
        "image": "https://via.placeholder.com/150",
        "description" : "Professional software developer for Acme Corp.",
        "tags": ["professional", "person"],
        "correlation": ["4058a72a-9523-11ea-bb37-0242ac130002"]
      }
    </pre>

    <p>Here is an example of an organization profile.</p>

    <pre class="example highlight" title="A profile for an organizational identity">
      {
        "id": "did:example:123456789abcdefghi",
        "type": "Organization",
        "title": "Acme Corp.",
        "image": "https://via.placeholder.com/150",
        "description" : "A software company.",
        "tags": ["professional", "organization"],
        "correlation": ["4058a72a-9523-11ea-bb37-0242ac130002"]
      }
    </pre>
  </section>

  <section >
    <h3><dfn>Currency</dfn></h3>
    <p>A quantity of currency controlled by one or more <a>Key</a>s.</p>

    <p>Here is an example of some ethereum stored on a testnet.</p>

    <pre class="example highlight" title="A currency example">
      {
        "id": "https://ropsten.etherscan.io/address/0x658e4fe24b34589492b18b1a45294be0601606a9",
        "type": "Currency",
        "title": "ETH for Games",
        "image": "https://via.placeholder.com/150",
        "description" : "Ethereum reserved for games.",
        "tags": ["personal"],
        "quantity": "6,271.91386730845876097",
        "unit": "ETH",
        "controller": ["did:ethr:0x658e4fe24b34589492b18b1a45294be0601606a9#key-0", "did:ethr:0x658e4fe24b34589492b18b1a45294be0601606a9#key-1"],
        "quorum": 2,
        "correlation": ["4058a72a-9523-11ea-bb37-0242ac130002"]
      }
    </pre>
  </section>

  <section>
    <h3><dfn>Credential</dfn></h3>

    <p>A set of claims about a subject.</p>

    <p>MAY be presented with one or more<a>Key</a>s.</p>

    <p>Here is an example of a University Degree represented using the [[vc-data-model]].</p>

    <pre class="example highlight" title="A verifiable credential example">
      {
        "@context": [
          "https://www.w3.org/2018/credentials/v1",
          "https://www.w3.org/2018/credentials/examples/v1"
        ],
        "id": "http://example.gov/credentials/3732",
        "type": [
          "VerifiableCredential",
          "UniversityDegreeCredential"
        ],
        "issuer": {
          "id": "did:example:123456789abcdefghi"
        },
        "issuanceDate": "2020-03-10T04:24:12.164Z",
        "credentialSubject": {
          "id": "did:example:ebfeb1f712ebc6f1c276e12ec21",
          "degree": {
            "type": "BachelorDegree",
            "name": "Bachelor of Science and Arts"
          }
        },
        "proof": {
          "type": "JsonWebSignature2020",
          "created": "2020-03-21T17:51:48Z",
          "verificationMethod": "did:example:123456789abcdefghi#_Qq0UL2Fq651Q0Fjd6TvnYE-faHiOpRlPVQcY_-tA4A",
          "proofPurpose": "assertionMethod",
          "jws": "eyJiNjQiOmZhbHNlLCJjcml0IjpbImI2NCJdLCJhbGciOiJFZERTQSJ9..OPxskX37SK0FhmYygDk-S4csY_gNhCUgSOAaXFXDTZx86CmI5nU9xkqtLWg-f4cqkigKDdMVdtIqWAvaYx2JBA"
        }
      }
    </pre>
  </section>

  

  <section >
    <h3>Key</h3>

    <p>A cryptographic key. Used for signing, encrypting or hashing.</p>

    <p>
      Here is an example of storing an Ed25519 key using JWK.
    </p>

    <pre class="example highlight" title="A jwk key example">
      {
        "id": "urn:uuid:53d846c8-9525-11ea-bb37-0242ac130002",
        "title": "My Test Key 1",
        "image": "https://via.placeholder.com/150",
        "description" : "For testing only, totally compromised.",
        "tags": ["professional", "organization", "compromised"],
        "correlation": ["4058a72a-9523-11ea-bb37-0242ac130002"],
        "controller": ["did:example:123#_Qq0UL2Fq651Q0Fjd6TvnYE-faHiOpRlPVQcY_-tA4A"],
        "type": "Ed25519VerificationKey2018",
        "publicKeyJwk": {
          "crv": "Ed25519",
          "x": "VCpo2LMLhn6iWku8MKvSLg2ZAoC-nlOyPVQaO3FxVeQ",
          "kty": "OKP",
          "kid": "_Qq0UL2Fq651Q0Fjd6TvnYE-faHiOpRlPVQcY_-tA4A"
        },
        "privateKeyJwk": {
            "crv": "Ed25519",
            "x": "VCpo2LMLhn6iWku8MKvSLg2ZAoC-nlOyPVQaO3FxVeQ",
            "d": "tP7VWE16yMQWUO2G250yvoevfbfxY25GjHglTP3ZOyU",
            "kty": "OKP",
            "kid": "_Qq0UL2Fq651Q0Fjd6TvnYE-faHiOpRlPVQcY_-tA4A"
        }
      }
    </pre>

    <p>
      Here is an example of storing an Ed25519 key using base58.
    </p>

    <pre class="example highlight" title="A base58 key example">
      {
        "id": "urn:uuid:e8fc7810-9524-11ea-bb37-0242ac130002",
        "title": "My Test Key 2",
        "image": "https://via.placeholder.com/150",
        "description" : "For testing only, totally compromised.",
        "tags": ["professional", "organization", "compromised"],
        "correlation": ["4058a72a-9523-11ea-bb37-0242ac130002"],
        "controller": ["did:key:z6MkjjCpsoQrwnEmqHzLdxWowXk5gjbwor4urC1RPDmGeV8r#z6MkjjCpsoQrwnEmqHzLdxWowXk5gjbwor4urC1RPDmGeV8r"],
        "type": "Ed25519VerificationKey2018",
        "privateKeyBase58": "3CQCBKF3Mf1tU5q1FLpHpbxYrNYxLiZk4adDtfyPEfc39Wk6gsTb2qoc1ZtpqzJYdM1rG4gpaD3ZVKdkiDrkLF1p",
        "publicKeyBase58": "6GwnHZARcEkJio9dxPYy6SC5sAL6PxpZAB6VYwoFjGMU"
      }
    </pre>
  </section>

  <section >
    <h3>Secret</h3>
    <p>A secret value.</p>

    <p>MAY be used as a source of entropy.</p>
    <p>MAY be used as input to a KDF.</p>

    <p>
      Here is an example of storing a mnemonic as a <a>Secret</a>.
    </p>

    <pre class="example highlight" title="A mnemonic example">
      {
        "id": "urn:uuid:c410e44a-9525-11ea-bb37-0242ac130002",
        "title": "My Ropsten Mnemonic 1",
        "image": "https://via.placeholder.com/150",
        "description" : "For testing only, totally compromised.",
        "tags": ["professional", "organization", "compromised"],
        "correlation": ["4058a72a-9523-11ea-bb37-0242ac130002"],
        "type": "Mnemonic",
        "value": "humble piece toy mimic miss hurdle smile awkward patch drama hurry mixture",
      }
    </pre>

    <p>
      Here is an example of storing entropy as a <a>Secret</a>.
    </p>

    <pre class="example highlight" title="An entropy example">
      {
        "id": "urn:uuid:c410e44a-9525-11ea-bb37-0242ac130002",
        "title": "My Test Entropy 1",
        "image": "https://via.placeholder.com/150",
        "description" : "For testing only, totally compromised.",
        "tags": ["professional", "organization", "compromised"],
        "correlation": ["4058a72a-9523-11ea-bb37-0242ac130002"],
        "type": "Entropy",
        "multibase": "z6MkuVZVSKLUNHRjXBXcEwvG5yiNHLhzBeXRjAkwmgSYensE",
      }
    </pre>
  </section>

  <section>
    <h3>Meta Data</h3>

    <p>Information about wallet data.</p>

    <p>
      Here is an example where meta data is used to remind the wallet controller 
      that a credential has likely be exposed because of a breach notification.
    </p>

    <pre class="example highlight" title="A credential meta data example">
      {
        "id": "urn:uuid:2905324a-9524-11ea-bb37-0242ac130002",
        "type": "MetaData",
        "title": "Degree Notes",
        "image": "https://via.placeholder.com/150",
        "description" : "Personal notes about this degree.",
        "tags": ["professional", "organization"],
        "correlation": ["urn:uuid:4058a72a-9523-11ea-bb37-0242ac130002"],
        "note": "I've shared this degree, with many websites that have been breached. It should be considered public information at this point :("
      }
    </pre>

    <p>
      Here is an example where meta data is used to remind the wallet controller 
      that they use a mnemonic for manage their ethereum accounts and funds for testing.
    </p>

    <pre class="example highlight" title="A secrete meta data example">
      {
        "id": "urn:uuid:2905324a-9524-11ea-bb37-0242ac130002",
        "type": "MetaData",
        "title": "Ropsten Testnet HD Accounts",
        "image": "https://via.placeholder.com/150",
        "description" : "My Ethereum TestNet Accounts",
        "tags": ["professional", "organization"],
        "correlation": ["urn:uuid:4058a72a-9523-11ea-bb37-0242ac130002"],
        "hdPath": "m’/44’/60’/0’",
        "seed": "urn:uuid:c410e44a-9525-11ea-bb37-0242ac130002"
      }
    </pre>
  </section>

</section>

<section id="interface" class="normative">
  <h2>Interface</h2>
</section>

<section id="integration" class="informative">
  <h2>Integration</h2>

  <p>
    The following sections describe how a wallet <a>controller</a> 
    can define relationships with external systems.
  </p>

  <section>
    <h3>HD Wallets</h3>

    <p>
      HD Wallets are a popular mechanism for managing many keys, 
      addresess and accounts across multiple crypto currency ledgers.
    </p>

    <p>
      Using a <a>Meta Data</a> object applied to a <a>Secret</a>, 
      a user instruct an application to discover <a>cryptocurrency</a> 
      that is controlled by a <a>Secret</a>.
    </p>

    <p> 
      See <a href="https://github.com/ethereum/EIPs/issues/84">EIP84</a> 
      for examples of how this is done in the ethereum community.
    </p>

  </section>

  <section>
    <h3>OpenPGP Keyring</h3>
    <a href="https://tools.ietf.org/html/rfc4880#section-3.6">OpenPGP Keyring</a>
  </section>

  <section>
    <h3>Android Keychain</h3>
    <a href="https://developer.android.com/reference/android/security/KeyChain">KeyChain</a>
    <a href="https://developer.android.com/training/articles/keystore">keystore</a>
  </section>

  <section>
    <h3>macOS Keychain Access</h3>
    <a href="https://support.apple.com/guide/keychain-access/welcome/mac">Keychain Acccess</a>
  </section>

  <section>
    <h3>Apple Wallet</h3>
    <a href="https://wallet.apple.com/">wallet.apple.com</a>
  </section>

  <section>
    <h3>Google Wallet</h3>
    <a href="https://wallet.google.com/">wallet.google.com</a>
  </section>

  <section>
    <h3>Microsoft Wallet</h3>
    <a href="http://wallet.microsoft.com/">wallet.microsoft.com</a>
  </section>

</section>

<section id="conformance" class="normative">
</section>



  </body>
</html>